<Window
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="clr-namespace:IPFilter.UI"
    xmlns:xctk="http://schemas.xceed.com/wpf/xaml/toolkit"
    x:Class="IPFilter.UI.MainWindow"
    Title="{Binding Update.ProductAndVersion}" Width="716" Loaded="Window_Loaded" WindowStyle="SingleBorderWindow" ResizeMode="CanMinimize" MinWidth="450" SizeToContent="Height">
    <Window.Resources>
        <Style x:Key="HyperLinkButtonStyle" TargetType="Button">
            <Setter Property="Focusable" Value="False" />
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <TextBlock>
                            <Hyperlink>
                                <Run Text="{TemplateBinding Content}" />
                            </Hyperlink>
                        </TextBlock>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </Window.Resources>

    <Window.DataContext>
        <local:MainWindowViewModel>
            <local:MainWindowViewModel.Update>
                <local:UpdateModel CurrentVersion="1.0.0.11" IsUpdateRequired="True" MinimumRequiredVersion="{x:Null}" Product="IPFilter Updater" IsUpdateAvailable="True" UpdateSizeBytes="65535" UpdateAvailableVisibility="Visible"/>
            </local:MainWindowViewModel.Update>
        </local:MainWindowViewModel>
    </Window.DataContext>
    
    
    <DockPanel>
        <StatusBar DockPanel.Dock="Top">
            <StatusBarItem HorizontalAlignment="Left">
                <Label VerticalAlignment="Bottom" Content="{Binding StatusText}" />
            </StatusBarItem>
            <StatusBarItem HorizontalAlignment="Right">
                <Button Width="75" Height="23" Command="{Binding StartCommand}" Content="{Binding ButtonText}" />
            </StatusBarItem>
        </StatusBar>
        <StatusBar DockPanel.Dock="Top">
            <StatusBarItem HorizontalContentAlignment="Stretch">
                <ProgressBar IsIndeterminate="{Binding ProgressIsIndeterminate}" Minimum="{Binding ProgressMin}" Maximum="{Binding ProgressMax}" Value="{Binding ProgressValue}" Height="26" VerticalAlignment="Top" />
            </StatusBarItem>
        </StatusBar>
        
        <Expander ExpandDirection="Down" Header="Advanced" IsExpanded="True">
            
        <TabControl HorizontalAlignment="Stretch" Margin="10" VerticalAlignment="Stretch">
            <TabItem Header="Info" Background="Transparent">
                <TextBox Text="{Binding LogData, Mode=OneWay}" />
            </TabItem>
            <TabItem Header="Options" Background="Transparent">

                <ScrollViewer>
                    
                <StackPanel CanVerticallyScroll="True" Orientation="Vertical" Margin="10">

                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="49*"/>
                            <ColumnDefinition Width="292*"/>
                        </Grid.ColumnDefinitions>
                        <ComboBox Height="23" Margin="24,12,12,0" ItemsSource="{Binding MirrorProviders}" VerticalAlignment="Top" SelectedItem="{Binding SelectedMirrorProvider}" Grid.Column="1">
                                <ComboBox.ItemTemplate>
                                    <DataTemplate>
                                        <StackPanel Orientation="Horizontal">
                                            <TextBlock Text="{Binding Name}" />
                                        </StackPanel>
                                    </DataTemplate>
                                </ComboBox.ItemTemplate>
                            </ComboBox>
                        <Label Height="23" HorizontalAlignment="Left" Margin="12,12,0,0" VerticalAlignment="Top" Width="104" Content="List Provider:" Grid.ColumnSpan="2"/>
                            
                        <Label Height="23" HorizontalAlignment="Left" Margin="12,41,0,0" VerticalAlignment="Top" Width="104" Content="List:" Grid.ColumnSpan="2"/>
                           <ComboBox Height="23" Margin="24,41,12,0" ItemsSource="{Binding Mirrors}" SelectedItem="{Binding SelectedFileMirror}" VerticalAlignment="Top" Grid.Column="1" />

                    </Grid>

                    <Label Content="Automatic update schedule" />

                    <StackPanel Orientation="Horizontal" Margin="10">
                        <CheckBox IsChecked="{Binding Options.IsScheduleEnabled}"></CheckBox>
                        <Label Content="Check for list updates every: " />
                        <xctk:IntegerUpDown IsEnabled="{Binding Options.IsScheduleEnabled}" Value="{Binding Options.ScheduleHours}" Maximum="24" Minimum="1"></xctk:IntegerUpDown>
                        <Label Content="hour(s)" />
                    </StackPanel>

                    <Label Content="Custom Paths" />
                    <DataGrid ItemsSource="{Binding Options.Paths }">

                    </DataGrid>
                    <StackPanel Orientation="Horizontal" Margin="10">
                        <Button Content="Save Settings" Command="{Binding Options.SaveSettings}"></Button>
                    </StackPanel>
                </StackPanel>
                </ScrollViewer>
            </TabItem>
        </TabControl>
        </Expander>
    </DockPanel>
</Window>
